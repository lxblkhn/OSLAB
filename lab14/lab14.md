# Российский университет дружбы народов
### факультет физико-математических и естественых наук






## Отчет по лабараторной рабете № 14
### *дисциплина : Операционыые системы*
*студент Блохин александр НКН*

**Москва**

***2021***


## Цель работы
Приобрести простейшие навыки разработки, анализа, тестирования и отладки
приложений в ОС типа UNIX/Linux на примере создания на языке программирования С калькулятора с простейшими функциями.


## **Ход работы**
1. В домашнем каталоге создайте подкаталог ~/work/os/lab_prog.

![clipboard](https://i.imgur.com/SFAOWvS.png)


2. Создайте в нём файлы: calculate.h, calculate.c, main.c.
Это будет примитивнейший калькулятор, способный складывать, вычитать,
умножать и делить, возводить число в степень, брать квадратный корень, вычислять sin, cos, tan. При запуске он будет запрашивать первое число, операцию,
второе число. После этого программа выведет результат и остановится.

![clipboard](https://i.imgur.com/XNRWsAg.png)

![clipboard](https://i.imgur.com/5vftzZK.png)

![clipboard](https://i.imgur.com/8NH204x.png)

![clipboard](https://i.imgur.com/uurh9ch.png)


3. Выполните компиляцию программы посредством gcc:
gcc -c calculate.c
gcc -c main.c
gcc calculate.o main.o -o calcul -lm




4. При необходимости исправьте синтаксические ошибки.(Добавил -g для отладки)

![clipboard](https://i.imgur.com/AkMZR0z.png)


5. Создайте Makefile со следующим содержанием

![clipboard](https://i.imgur.com/GPY05ut.png)




6. С помощью gdb выполните отладку программы calcul

![clipboard](https://i.imgur.com/37Wse4d.png)


![clipboard](https://i.imgur.com/pAqLBT2.png)

![clipboard](https://i.imgur.com/mrkUKuN.png)

![clipboard](https://i.imgur.com/R92w5Ek.png)

![clipboard](https://i.imgur.com/PeuHHq6.png)


## Вывод
Приобрести простейшие навыки разработки, анализа, тестирования и отладки
приложений в ОС типа UNIX/Linux на примере создания на языке программирования С калькулятора с простейшими функциями.


## Контрольные вопросы

1. Дополнительную информацию о этих программах можно получить с помощью функций info и man и help

2. Процесс разработки программного обеспечения обычно разделяется на следующие этапы: – планирование, включающее сбор и анализ требований к функционалу и другим характеристикам разрабатываемого приложения;
– проектирование, включающее в себя разработку базовых алгоритмов и спецификаций, определение языка программирования;
– непосредственная разработка приложения:
– кодирование — по сути создание исходного текста программы (возможно в нескольких вариантах);
– анализ разработанного кода;
– сборка, компиляция и разработка исполняемого модуля;
– тестирование и отладка, сохранение произведённых изменений;
– документирование.
Для создания исходного текста программы разработчик может воспользоваться любым удобным для него редактором текста: vi, vim, mceditor, emacs, geany и др. После завершения написания исходного кода программы (возможно состоящей из нескольких файлов), необходимо её скомпилировать и получить исполняемый модуль.

3. Суффикс - расширение. Например с.

4. gcc по расширению (суффиксу) .c распознает тип файла для компиляции и формирует объектный модуль — файл с расширением .o.

5. Для сборки разрабатываемого приложения и собственно компиляции полезно воспользоваться утилитой make. Она позволяет автоматизировать процесс преобразования файлов программы из одной формы в другую, отслеживает взаимосвязи между файлами.

6. target1 [target2...]:[:] [dependment1...] [(tab)commands] [#commentary]
[(tab)commands] [#commentary]
Здесь знак # определяет начало комментария (содержимое от знака # и до конца строки не будет обрабатываться. Одинарное двоеточие указывает на то, что последовательность команд должна содержаться в одной строке. Для переноса можно вдлинной строке команд можно использовать обратный слэш (). Двойное двоеточие указывает на то, что последовательность команд может содержаться в нескольких последовательных строках. Пример более сложного синтаксиса Makefile:

CC = gcc
CFLAGS =
abcd: abcd.c
$(CC) -o abcd $(CFLAGS) abcd.c
clean:
-rm abcd *.o *~
В этом примере в начале файла заданы три переменные: CC и CFLAGS. Затем указаны цели, их зависимости и соответствующие команды. В командах происходит обращение к значениям переменных. Цель с именем clean производит очисткукаталога от файлов, полученных в результате компиляции. Для её описания использованы регулярные выражения.

7. Пошаговая отладка программ заключается в том, что выполняется один оператор программы и, затем контролируются те переменные, на которые должен был воздействовать данный оператор. Если в программе имеются уже отлаженные подпрограммы, то подпрограмму можно рассматривать, как один оператор программы и воспользоваться вторым способом отладки программ. Если в программе существует достаточно большой участок программы, уже отлаженный ранее, то его можно выполнить, не контролируя переменные, на которые он воздействует. Использование точек останова позволяет пропускать уже отлаженную часть программы. Точка останова устанавливается в местах, где необходимо проверить содержимое переменных или просто проконтролировать, передаётся ли управление данному оператору. Практически во всех отладчиках поддерживается это свойство (а также выполнение программы до курсора и выход из подпрограммы). Затем отладка программы продолжается в пошаговом режиме с контролем локальных и глобальных переменных, а также внутренних регистров микроконтроллера и напряжений на выводах этой микросхемы.

8. backtrace вывод на экран пути к текущей точке останова (по сутивывод названий всех функций)
break установить точку останова (в качестве параметра может быть указан номер строки или название функции)
clear удалить все точки останова в функции
continue продолжить выполнение программы
delete удалить точку останова
display добавить выражение в список выражений, значения которых отображаются при достижении точки останова программы
finish выполнить программу до момента выхода из функции
info breakpoints вывести на экран список используемых точек останова
info watchpoints вывести на экран список используемых контрольных выражений
list вывести на экран исходный код (в качестве параметра может быть указано название файла и через двоеточие номера начальной и конечной строк)
next выполнить программу пошагово, но без выполнения вызываемых в программе функций
print вывести значение указываемого в качестве параметра выражения
run запуск программы на выполнение
set установить новое значение переменной
step пошаговое выполнение программы
watch установить контрольное выражение, при изменении значения которого программа будет остановлена

9. Выполнили компиляцию программы 2)Увидели ошибки в программе
Открыли редактор и исправили программу
Загрузили программу в отладчик gdb
run — отладчик выполнил программу, мы ввели требуемые значения.
программа завершена, gdb не видит ошибок.
10. в сообшении указывался файл и строка с ошибкой, а ак же ее характер.

11. cscope - исследование функций, содержащихся в программе; splint — критическая проверка программ, написанных на языке Си.

12. Ещё одним средством проверки исходных кодов программ, написанных на языке C, является утилита splint. Эта утилита анализирует программный код, проверяеткорректность задания аргументов использованных в программе функций и типов возвращаемых значений, обнаруживает синтаксические и семантические ошибки. В отличие от компилятора C анализатор splint генерирует комментарии с описанием разбора кода программы и осуществляет общий контроль, обнаруживая такие ошибки, как одинаковые объекты, определённые в разных файлах, или объекты, чьи значения не используются в работе программы, переменные с некорректно заданными значениями и типами и многое другое.